{"version":3,"file":"fake-fetch.umd.js","sources":["../index.js"],"sourcesContent":["'use strict';\n\nvar sinon = require('sinon');\n\nfunction withRequest(arg) {\n    return window.Request && arg instanceof window.Request;\n}\n\nmodule.exports.getOptions = function () {\n    return window.fetch.firstCall.args[1] || {};\n};\n\nmodule.exports.install = function () {\n    sinon.stub(window, 'fetch');\n};\n\nmodule.exports.restore = function () {\n    window.fetch.restore();\n};\n\nmodule.exports.getMethod = function () {\n    var firstArg = window.fetch.firstCall.args[0];\n    if (withRequest(firstArg)) {\n        return firstArg.method;\n    }\n    return this.getOptions().method || 'get';\n};\n\nmodule.exports.getBody = function () {\n    var firstArg = window.fetch.firstCall.args[0];\n    if (withRequest(firstArg)) {\n        return firstArg.body;\n    }\n    return this.getOptions().body || '';\n};\n\nmodule.exports.getUrl = function () {\n    var firstArg = window.fetch.firstCall.args[0];\n    if (withRequest(firstArg)) {\n        return firstArg.url;\n    }\n    return firstArg;\n};\n\nmodule.exports.getRequestHeaders = function () {\n    var firstArg = window.fetch.firstCall.args[0];\n    if (withRequest(firstArg)) {\n        return firstArg.headers;\n    }\n    return this.getOptions().headers || {};\n};\n\nmodule.exports.respondWith = function (data, options) {\n    return window.fetch.returns(Promise.resolve(new Response(data, options)));\n};\n\nObject.defineProperty(\n    module.exports,\n    'called',\n    {\n        get: () => !!window.fetch.firstCall\n    }\n);\n"],"names":["sinon","require","withRequest","arg","window","Request","module","exports","getOptions","fetch","firstCall","args","install","stub","restore","getMethod","firstArg","method","this","getBody","body","getUrl","url","getRequestHeaders","headers","respondWith","data","options","returns","Promise","resolve","Response","Object","defineProperty","get"],"mappings":"0IAEA,IAAIA,EAAQC,QAAQ,SAEpB,SAASC,EAAYC,UACVC,OAAOC,SAAWF,aAAeC,OAAOC,QAGnDC,OAAOC,QAAQC,WAAa,kBACjBJ,OAAOK,MAAMC,UAAUC,KAAK,IAAM,IAG7CL,OAAOC,QAAQK,QAAU,WACrBZ,EAAMa,KAAKT,OAAQ,UAGvBE,OAAOC,QAAQO,QAAU,WACrBV,OAAOK,MAAMK,WAGjBR,OAAOC,QAAQQ,UAAY,eACnBC,EAAWZ,OAAOK,MAAMC,UAAUC,KAAK,UACvCT,EAAYc,GACLA,EAASC,OAEbC,KAAKV,aAAaS,QAAU,OAGvCX,OAAOC,QAAQY,QAAU,eACjBH,EAAWZ,OAAOK,MAAMC,UAAUC,KAAK,UACvCT,EAAYc,GACLA,EAASI,KAEbF,KAAKV,aAAaY,MAAQ,IAGrCd,OAAOC,QAAQc,OAAS,eAChBL,EAAWZ,OAAOK,MAAMC,UAAUC,KAAK,UACvCT,EAAYc,GACLA,EAASM,IAEbN,GAGXV,OAAOC,QAAQgB,kBAAoB,eAC3BP,EAAWZ,OAAOK,MAAMC,UAAUC,KAAK,UACvCT,EAAYc,GACLA,EAASQ,QAEbN,KAAKV,aAAagB,SAAW,IAGxClB,OAAOC,QAAQkB,YAAc,SAAUC,EAAMC,UAClCvB,OAAOK,MAAMmB,QAAQC,QAAQC,QAAQ,IAAIC,SAASL,EAAMC,MAGnEK,OAAOC,eACH3B,OAAOC,QACP,SACA,CACI2B,uBAAa9B,OAAOK,MAAMC"}